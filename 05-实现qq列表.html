<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>无标题文档</title>
<style>
ul , h2 { padding:0; margin:0; }
li { list-style:none; }
#list { width:240px; border:1px solid #333; margin:0 auto; }

#list h2 { height:30px; line-height:30px; text-indent:20px; background:url(img/ico1.gif) no-repeat 5px center #6FF; color:#000; }
#list .active { background:url(img/ico2.gif) no-repeat 5px center #FF9; color:#000; }
#list ul { display:none; }
#list ul li { line-height:24px; border-bottom:1px solid #333; text-indent:24px; }
#list ul .hover { background:#6FF; }
</style>
</head>
  <script>
	//当其它的全部加载完之后执行
	window.onload = function(){
		//分析，点击每个h2展开li,获取元素
		var oList = document.getElementById('list');
		var aH2 = oList.getElementsByTagName('h2');
		var aUl = oList.getElementsByTagName('ul');
	
		
		//循环给每个aH2添加点击事件
		//设置开关，控制点击显示，隐藏切换
		var onOff = true;
		
		//设置一个变量判断本次点击的是否和上次的一样
		var obj = -1;//不能设为null, 布尔值为false
		for(var i=0;i<aH2.length;i++){
			//给每个aH2添加属性index存储自己的下标，对应到相应的oUl
			aH2[i].index=i;
			aH2[i].onclick = function(){
				//暴力清除，每次点击时让别的aH2都收起来
				if(obj!=this.index){
					onOff=true;
				}
				for(var i=0;i<aH2.length;i++){
					aH2[i].className ='';
				    aUl[i].style.display ='none';
				}
				
				if(onOff){//首先进入if
					this.className ='active';
				    aUl[this.index].style.display ='block';
				}else{
					this.className ='';
				    aUl[this.index].style.display ='none';
				}
				obj=this.index;//把下标存一下
				onOff=!onOff;//取反，下次进else
				
			}
			fn(aUl[i]);//给每个aUl循环一下，调用fn函数
			
		}
		//先获取传入参数下边的li,然后添加鼠标移上事件
	   function fn(ul){
	   	var aLi = ul.getElementsByTagName('li');
	   	for(var i=0;i<aLi.length;i++){
	   		aLi[i].onmouseover = function(){
	   				this.className ='hover';
	   		}
	   		aLi[i].onmouseout = function(){
	   				this.className ='';
	   		}
	   	
	   	}
	   }
	}
  </script>
<body>

<ul id="list">
	<li>
		<h2>我的好友</h2>
		<ul>
			<li>张三</li>
			<li>张三</li>
			<li>张三</li>
			<li>张三</li>
		</ul>
	</li>
	<li>
		<h2>企业好友</h2>
		<ul>
			<li>李四</li>
			<li>李四</li>
			<li>李四</li>
			<li>李四</li>
			<li>李四</li>
		</ul>
	</li>
	<li>
		<h2>黑名单</h2>
		<ul>
			<li>张小三</li>
			<li>李小四</li>
		</ul>
	</li>
</ul>

</body>
</html>
